# Точки выхода API

## /user/get

### Описание
Проверка наличия пользовательской сессии и получение имени пользователя

### Формат передаваемых данных
Тело запроса - JSON

### Тип запроса
* POST

### Входные данные
* session: строка - текущая сессия

### Выходные данные
* Ok(200)
* * username: строка - имя пользователя
* BadRequest(400)
* * type: строка - тип ошибки
* * text: строка - текст ошибки

### Действия
* Принимает идентификатор пользовательской сессии.
* Возвращает в ответ имя пользователя, если найдена соответствующая пользовательская сессия.

### Возможные типы ошибок
* Тип ошибки 0
* Тип ошибки 1
* Тип ошибки 2

## /user/new

### Описание
Создание новой пользовательской сессии

### Формат передаваемых данных
Тело запроса - JSON

### Тип запроса
* POST

### Входные данные
* username: строка - имя пользователя

### Выходные данные
* Ok(200)
* * session: строка - текущая сессия
* BadRequest(400)
* * type: строка - тип ошибки
* * text: строка - текст ошибки

### Действия
* Принимает имя пользователя.
* Создаёт новую запись в списке пользователей:
* * user_id - новый идентификатор пользователя - наибольшее число в таблице + 1;
* * username - полученное имя пользователя;
* * session - случайные 8 символов, уникальное поле;
* * question - номер вопроса - по умолчанию 0.
* Возвращает идентификатор пользовательской сессии session.

### Возможные типы ошибок
* Тип ошибки 0
* Тип ошибки 1
* Тип ошибки 3

## /question/get

### Описание
Получение текста вопроса

### Формат передаваемых данных
Тело запроса - JSON

### Тип запроса
* POST

### Входные данные
* session: строка - текущая сессия

### Выходные данные
* Ok(200)
* * question: строка - текст вопроса
* BadRequest(400)
* * type: строка - тип ошибки
* * text: строка - текст ошибки

### Действия
* Принимает идентификатор пользовательской сессии.
* Возвращает текст вопроса, соответствующий идентификатору текущего вопроса пользователя.

### Возможные типы ошибок
* Тип ошибки 0
* Тип ошибки 1
* Тип ошибки 2

## /question/answer

### Описание
Ответ на заданный вопрос

### Формат передаваемых данных
Тело запроса - JSON

### Тип запроса
* POST

### Входные данные
* session: строка - текущая сессия
* answer: логический - ответ пользователя (true == да, false == нет)

### Выходные данные
* Ok(200)
* * answer_type: строка - тип ответа пользователю
* * * 0: финальная догадка на основе ответов пользователя
* * * 1: переход к следующему вопросу
* * guess: строка - догадка на основе ответов пользователя
* BadRequest(400)
* * type: строка - тип ошибки
* * text: строка - текст ошибки

### Действия
* Принимает идентификатор пользовательской сессии и ответ на вопрос.
* Если идентификатор следующего вопроса, соответствующий ответу пользователя, существует, то:
* * в таблице пользователей на основе пользовательского ответа текущий вопрос меняется на следующий.
* * пользователю возвращается answer_type = 1.
* Если идентификатор следующего вопроса, соответствующий ответу пользователя, не существует, то:
* * пользователю возвращается answer_type = 0;
* * пользователю возвращается догадка на основе ответов пользователя.

### Возможные типы ошибок
* Тип ошибки 0
* Тип ошибки 1
* Тип ошибки 2

## /guess/correct

### Описание
Догадка верна

### Формат передаваемых данных
Тело запроса - JSON

### Тип запроса
* POST

### Входные данные
* session: строка - текущая сессия

### Выходные данные
* Ok(200)
* * status: строка - "Ok"
* BadRequest(400)
* * type: строка - тип ошибки
* * text: строка - текст ошибки

### Действия
* Принимает идентификатор пользовательской сессии.
* Изменяет значение текущего вопроса на 0.

### Возможные типы ошибок
* Тип ошибки 0
* Тип ошибки 1
* Тип ошибки 2

## /question/add

### Описание
Догадка неверна - новый вопрос

### Формат передаваемых данных
Тело запроса - JSON

### Тип запроса
* POST

### Входные данные
* session: строка - текущая сессия
* question: строка - текст нового вопроса
* answer: логический - ответ на предыдущий вопрос
* guess_answer: логический - путь новой догадки для нового вопроса
* guess: строка - текст нового ответа

### Выходные данные
* Ok(200)
* * status: строка - "Ok"
* BadRequest(400)
* * type: строка - тип ошибки
* * text: строка - текст ошибки

### Действия
* Принимает входные данные.
* Создаёт новую догадку:
* * guess_id - новый идентификатор догадки - наибольшее число в таблице + 1;
* * guess - новый текст догадки, предоставленный пользователем.
* Создаёт новый вопрос:
* * question_id - новый идентификатор вопроса - наибольшее число в таблице + 1;
* * username - имя пользователя, получаемое с помощью идентификатора текущей сессии;
* * question - полученный текст вопроса;
* * yes_guess_id - идентификатор догадки при ответе "да" на новый вопрос. Если guess_answer == true, то равно guess_id, иначе равно идентификатору ответа на предыдущий вопрос по пути answer;
* * no_guess_id - идентификатор догадки при ответе "нет" на новый вопрос. Если guess_answer == false, то равно guess_id, иначе равно идентификатору ответа на предыдущий вопрос по пути answer.

### Возможные типы ошибок
* Тип ошибки 0
* Тип ошибки 1
* Тип ошибки 2
* Тип ошибки 4
* Тип ошибки 5

### Примечания
* Предполагается, что клиентское приложение выполнит запрос /question/add только после того, как спросит у пользователя, какому из ответов ("да" или "нет") на новый вопрос соответствует новая догадка.